BEGIN TRY DROP TABLE DataSets END TRY BEGIN CATCH END CATCH
BEGIN TRY DROP TABLE DataSets_Relationships END TRY BEGIN CATCH END CATCH

BEGIN TRY DROP SEQUENCE SequenceDataSets END TRY BEGIN CATCH END CATCH

BEGIN TRY DROP PROCEDURE DataSet_AddRecord END TRY BEGIN CATCH END CATCH
BEGIN TRY DROP PROCEDURE DataSet_Create END TRY BEGIN CATCH END CATCH
BEGIN TRY DROP PROCEDURE DataSet_Delete END TRY BEGIN CATCH END CATCH
BEGIN TRY DROP PROCEDURE DataSet_DeleteRecord END TRY BEGIN CATCH END CATCH
BEGIN TRY DROP PROCEDURE DataSet_GetAllColumns END TRY BEGIN CATCH END CATCH
BEGIN TRY DROP PROCEDURE DataSet_GetColumns END TRY BEGIN CATCH END CATCH
BEGIN TRY DROP PROCEDURE DataSet_GetInfo END TRY BEGIN CATCH END CATCH
BEGIN TRY DROP PROCEDURE DataSet_UpdateColumns END TRY BEGIN CATCH END CATCH
BEGIN TRY DROP PROCEDURE DataSet_UpdateInfo END TRY BEGIN CATCH END CATCH
BEGIN TRY DROP PROCEDURE DataSet_UpdateRecord END TRY BEGIN CATCH END CATCH
BEGIN TRY DROP PROCEDURE DataSets_GetList END TRY BEGIN CATCH END CATCH
BEGIN TRY DROP PROCEDURE DataSets_Relationship_Create END TRY BEGIN CATCH END CATCH
BEGIN TRY DROP PROCEDURE DataSets_Relationships_GetAll END TRY BEGIN CATCH END CATCH
BEGIN TRY DROP PROCEDURE DataSets_Relationships_GetList END TRY BEGIN CATCH END CATCH

--remove all user-created datasets
DECLARE @sql nvarchar(MAX)
BEGIN TRY 
	SELECT @sql=STRING_AGG('DROP TABLE ' + TABLE_NAME, char(10)) FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME LIKE 'DataSet_%'
	EXECUTE sp_executesql @sql
END TRY BEGIN CATCH END CATCH


--remove all user-created sequences
BEGIN TRY 
	SELECT @sql=STRING_AGG('DROP SEQUENCE ' + SEQUENCE_NAME, char(10)) FROM INFORMATION_SCHEMA.SEQUENCES WHERE SEQUENCE_NAME LIKE 'Sequence_DataSet_%'
	EXECUTE sp_executesql @sql
END TRY BEGIN CATCH END CATCH